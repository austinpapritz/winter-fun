<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- metadata -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />

        <!-- title and favicon -->
        <title>Web App</title>

        <!-- js -->
        <script type="module" src="app.js"></script>

        <!-- fonts -->
        <!-- see https://fonts.google.com/ -->

        <!-- css -->
        <link rel="stylesheet" href="styles/reset.css" />
        <link rel="stylesheet" href="styles/global.css" />
        <!-- add link for page specific css -->
        <script>
            let calcArr = [];

            //BUG: second operator click displays operator. Must change setting tossIfFirstNotNum to 'o'

            function tossIfFirstNotNum(n) {
                if ((n === '/' || n === '-' || n === '+' || n === '*') && calcArr.length === 0) {
                    return;
                } else {
                    return n;
                }
            }

            function compareNAndPenultimateItem(n) {
                //if n is operator then compare it to the penultimate item to either replace or add n to end
                if (n === '/' || n === '-' || n === '+' || n === '*') {
                    let penultimateItem = calcArr[calcArr.length - 2];
                    if (
                        penultimateItem === '/' ||
                        penultimateItem === '-' ||
                        penultimateItem === '+' ||
                        penultimateItem === '*'
                    ) {
                        //if the last item (besides the space) is an operator then replace it
                        replaceLast(n);
                    } else {
                        //if the penultimateItem isn't an operator then simply push n with spaces
                        calcArr.push(' ');
                        calcArr.push(n);
                        calcArr.push(' ');
                    }
                } else {
                    //if number then push to calcArr
                    calcArr.push(n);
                }
            }

            function replaceLast(newOperator) {
                calcArr[calcArr.length - 2] = newOperator;
            }

            function displayCalcArr() {
                //!isNan makes sure that user cannot start with operator
                if (!isNaN(calcArr[0])) {
                    //display the calcArr (with a space between values)
                    document.getElementById('result').value = calcArr.join('');
                } else {
                    //if the user did start with operator then clear calcArr
                    calcArr = [];
                }
            }

            function handleInput(n) {
                //if first input is an operator then toss, otherwise return n
                let o = tossIfFirstNotNum(n);
                //if both o and penultimate item are operators then replace penultimateItem with n
                compareNAndPenultimateItem(o);

                displayCalcArr();
            }

            function clearScreen() {
                calcArr = [];
                document.getElementById('result').value = '';
            }

            function calculate() {
                //set results to the evaluation of equation
                const results = calcArr.join('');
                document.getElementById('result').value = eval(results);
                //the follow replaces the previous calcArr with the answer of results so user can perform math on it
                calcArr = [];
                let newEquation = document.getElementById('result').value;
                calcArr.push(newEquation);
                displayCalcArr();
            }
        </script>
    </head>

    <body>
        <header>
            <h1>❄️Winter Fun❄️</h1>
        </header>

        <main>
            <h2>How to X-ify</h2>
            <form id="xify-form" type="submit">
                <h3>Type in a very important number</h3>
                <input name="xify-input" />
                <button>Submit</button>
            </form>
            <p>Your number x-ified: <span id="xed"></span></p>
            <hr />
            <h2>How to Pangram</h2>
            <form id="pangram" type="submit">
                <h3>Is it a pangram???</h3>
                <input name="string" />
                <button>Submit String</button>
            </form>
            <p>Is it a pangram: <span id="result"></span></p>
            <hr />
            <h2>How to Fibonacci</h2>
            <p id="display-fib"></p>
            <p id="display-iter"></p>
            <hr />
            <h2>How to Calculator</h2>
            <table class="calculator">
                <tr>
                    <td colspan="3">
                        <input class="display-box" type="text" id="result" disabled />
                    </td>

                    <!-- clearScreen() function clears all the values -->

                    <td>
                        <input type="button" value="C" onclick="clearScreen()" id="clear-btn" />
                    </td>
                </tr>
                <tr>
                    <!-- displayCalc() function displays the value of clicked button -->

                    <td><input type="button" value="1" onclick="handleInput('1')" /></td>

                    <td><input type="button" value="2" onclick="handleInput('2')" /></td>

                    <td><input type="button" value="3" onclick="handleInput('3')" /></td>

                    <td><input type="button" value="/" onclick="handleInput('/')" /></td>
                </tr>
                <tr>
                    <td><input type="button" value="4" onclick="handleInput('4')" /></td>

                    <td><input type="button" value="5" onclick="handleInput('5')" /></td>

                    <td><input type="button" value="6" onclick="handleInput('6')" /></td>

                    <td><input type="button" value="-" onclick="handleInput('-')" /></td>
                </tr>
                <tr>
                    <td><input type="button" value="7" onclick="handleInput('7')" /></td>

                    <td><input type="button" value="8" onclick="handleInput('8')" /></td>

                    <td><input type="button" value="9" onclick="handleInput('9')" /></td>

                    <td><input type="button" value="+" onclick="handleInput('+')" /></td>
                </tr>
                <tr>
                    <td><input type="button" value="." onclick="handleInput('.')" /></td>

                    <td><input type="button" value="0" onclick="handleInput('0')" /></td>

                    <!-- calculate() function evaluates the mathematical expression -->

                    <td>
                        <input type="button" value="=" onclick="calculate()" id="equal-btn" />
                    </td>

                    <td><input type="button" value="*" onclick="handleInput('*')" /></td>
                </tr>
            </table>
            <hr />
            <!-- tabs experiment -->
            <h2>How to Tabs</h2>
            <div class="about-center section-center"></div>
            <article class="about">
                <!-- button container -->
                <div class="btn-container">
                    <button class="tab-btn" data-id="history">history</button>
                    <button class="tab-btn" data-id="vision">vision</button>
                    <button class="tab-btn" data-id="goals">goals</button>
                </div>

                <article class="about-content">
                    <!-- single item  -->
                    <div class="content active" id="history">
                        <h4>History</h4>
                        <!-- history -->
                        <p>
                            Anime is literally the best thing ever. All of you baka Americans who
                            can't wrap your minds around it because you think your Hollywood films
                            and TV shows you are just stupid and wrong and need to stop speaking.
                            Literally nobody likes your opinions except the other baka Americans
                            that don't understand Anime culture and the fact that Anime is truly a
                            masterpiece of art, emotion and plot development. The characters always
                            develop so well and so does the plot and it is just like really good.
                            Like literally just watch it and you will understand you stupid white
                            people. Ok, I am white but like I like anime so I'm basically Japanese
                            at this point. Anyways, back to the subject, have you ever heard of the
                            best anime ever, Redo of Healer...
                        </p>
                    </div>
                    <!-- end of single item -->
                    <!-- single item  -->
                    <div class="content" id="vision">
                        <h4>Vision</h4>
                        <!-- vision -->
                        <p>
                            I like to creep around my home and act like a goblin. I don’t know why
                            but I just enjoy doing this. Maybe it’s my way of dealing with stress or
                            something but I just do it about once every week. Generally I’ll carry
                            around a sack and creep around in a sort of crouch-walking position
                            making goblin noises, then I’ll walk around my house and pick up various
                            different “trinkets” and put them in my bag while saying stuff like
                            “I’ll be having that” and laughing maniacally in my goblin voice
                            (“trinkets” can include anything from shit I find on the ground to
                            cutlery or other utensils). The other day I was talking with my
                            neighbours and they mentioned hearing weird noises like what I wrote
                            about and I was just internally screaming the entire conversation. I’m
                            99% sure they don’t know it’s me but god that 1% chance is seriously
                            weighing on my mind.
                        </p>
                    </div>
                    <!-- end of single item -->
                    <!-- single item  -->
                    <div class="content" id="goals">
                        <h4>Goals</h4>
                        <!-- goals -->
                        <p>
                            I know this is really stupid but I’m sad about it. Yesterday I had a
                            friend come over. I’m a girl who lives alone so I guess some “dude”
                            stuff hasn’t been done around the house. Context: I have a spider named
                            joe. He’s a dandy long leg. He’s been my friend in the bathroom for
                            months and had recently made his way down to closer by me by the tub
                            instead of on the ceiling. I like to think I gained his trust. Well my
                            friend goes into the bathroom and comes out said “you’re welcome”. I’m
                            super confused. So I ask “for what?” He says “I just killed a big ass
                            spider for you”. I couldn’t even contain myself. I just yelled “YOU
                            KILLED JOE? And started tearing up. I didn’t tell him to leave Joe alone
                            it never occurred to me. JOE TRUSTED ME. Joe had been in my bathroom
                            since he was super tiny and he grew to be such a big boy. My friend was
                            distraught. He’s a Pisces, so he immediately felt my deep sorrow for
                            Joe. He apologized and swore to never squish any more spiders at my
                            house. I think Joe was biologically female because there is a baby Joe.
                            Baby Joe is on my ceiling but idk if I can gain Baby Joe’s trust after
                            they witnessed the murder of their parental figure. RIP Joe I miss you
                            so much. Getting ready in the morning will never be the same.
                        </p>
                        <ul>
                            <li>list item</li>
                            <li>list item</li>
                            <li>list item</li>
                        </ul>
                    </div>
                    <!-- end of single item -->
                </article>
            </article>
            <hr />
            <h2>How to Animate</h2>
            <div class="animation-move"></div>
            <hr />
            <!-- slideshow -->
            <h2>How to slide</h2>
            <div class="slider-container">
                <!-- slide -->
                <div class="slide">
                    <div>
                        <img src="./assets/kanjenchunga.jpg" class="slide-img" />
                        <h1>Kanjenchunga</h1>
                    </div>
                </div>
                <!-- slide -->
                <div class="slide">
                    <div>
                        <img src="./assets/annapurna.jpg" class="slide-img" />
                        <h1>Annapurna</h1>
                    </div>
                </div>
                <!-- slide -->
                <div class="slide">
                    <div>
                        <img src="./assets/cho-oyu.jpg" class="slide-img" />
                        <h1>Cho Oyu</h1>
                    </div>
                </div>
                <!-- slide -->
                <div class="slide">
                    <div>
                        <img src="./assets/broad-peak.jpg" class="slide-img" />
                        <h1>Broad Peak</h1>
                    </div>
                </div>
            </div>
            <div class="btn-container">
                <button type="button" class="prevBtn">Prev</button>
                <button type="button" class="nextBtn">Next</button>
            </div>
            <hr />
            <h2>How to randomly generate color</h2>
            <div class="color-container">
                <div class="rba-container">
                    <h3>RGB color: <span class="color-span"> rgb(224, 234, 247) </span></h3>
                    <button class="btn btn-hero" id="rgb-btn">Click me</button>
                </div>
                <div class="hex-container">
                    <h3>Hex color: <span class="color-hex"> #E0EAF7 </span></h3>
                    <button class="btn btn-hero" id="hex-btn">Click me</button>
                </div>
            </div>
        </main>
    </body>
</html>
